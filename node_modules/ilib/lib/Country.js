var ilib=require("./ilib.js");var Utils=require("./Utils.js");var Locale=require("./Locale.js");var LocaleInfo=require("./LocaleInfo.js");var ResBundle=require("./ResBundle.js");var Country=function(o){var e=true,n=undefined,t,i;if(o){if(o.locale){this.locale=typeof o.locale==="string"?new Locale(o.locale):o.locale}if(typeof o.sync!=="undefined"){e=o.sync}if(o.loadParams){n=o.loadParams}}this.locale=this.locale||new Locale;i=new LocaleInfo(this.locale);if(i.getRegionName()===undefined){t="en-US"}else{t=this.locale}if(!this.countryToCode){Utils.loadData({name:"ctrynames.json",object:Country,locale:t,sync:e,loadParams:n,callback:ilib.bind(this,function(e){this.countryToCode=e;this._loadLocinfo(o&&o.onLoad)})})}else{this._loadLocinfo(o&&o.onLoad)}};Country.getAvailableCode=function(){var o=[],e,n=new ResBundle({name:"ctrynames"}).getResObj();for(e in n){if(e&&n[e]){o.push(n[e])}}return o};Country.getAvailableCountry=function(){var o=[],e,n=new ResBundle({name:"ctrynames"}).getResObj();for(e in n){if(e&&n[e]){o.push(e)}}return o};Country.prototype={_loadLocinfo:function(o){new LocaleInfo(this.locale,{onLoad:ilib.bind(this,function(e){var n=this.countryToCode,t;this.codeToCountry={};this.locinfo=e;for(t in n){if(t&&n[t]){this.codeToCountry[n[t]]=t}}if(typeof o==="function"){o(this)}})})},getCode:function(o){if(!this.countryToCode[o]){throw"Country "+o+" is unknown"}return this.countryToCode[o]},getName:function(o){if(!this.codeToCountry[o]){throw"Country "+o+" is unknown"}return this.codeToCountry[o]},getLocale:function(){return this.locale}};module.exports=Country;