var ilib=require("./ilib.js");var Utils=require("./Utils.js");var Locale=require("./Locale.js");var ListFmt=function(t){this.locale=new Locale;this.sync=true;this.style="standard";this.length="short";this.loadParams={};if(t){if(t.locale){this.locale=t.locale}if(typeof t.sync!=="undefined"){this.sync=t.sync==true}if(t.length){this.length=t.length}if(t.loadParams){this.loadParams=t.loadParams}if(t.style){this.style=t.style}}Utils.loadData({name:"list.json",object:ListFmt,locale:this.locale,sync:this.sync,loadParams:this.loadParams,callback:ilib.bind(this,function(e){this.fmtdata=e;if(t&&typeof t.onLoad==="function"){t.onLoad(this)}})})};ListFmt.prototype.format=function(t){if(!t||!ilib.isArray(t)){return""}var e=t.length;var i,s;var a,l,r;var o;i=this.fmtdata[this.style][this.length]||this.fmtdata[this.style];a=i["start"];l=i["middle"];r=i["end"];if(e===0){return""}else if(e===1){s=t.toString()}else if(e===2){i=i["2"];s=i.replace("{0}",t[0]).replace("{1}",t[1])}else{for(o=e;o>=0;o--){if(o==e){s=r.replace("{0}",t[e-2]).replace("{1}",t[e-1]);o=o-2}else if(o==0){s=a.replace("{0}",t[o]).replace("{1}",s)}else{s=l.replace("{0}",t[o]).replace("{1}",s)}}}return s};ListFmt.prototype.getLocale=function(){return this.locale.getSpec()};ListFmt.prototype.getStyle=function(){return this.style};module.exports=ListFmt;